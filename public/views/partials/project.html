<h1 ng-bind="project.name"> Project Title </h1>
<hr>

<div class="policy">
  <div ng-hide="reports">
    <div class="row">
      <div class="col-md-3">
        <img src="/img/happy.png" width="100%"> </img>
      </div>
      <div class="col-md-9"> 
        <p> Please add the following header to your website: </p>
        <pre> default-src 'self'; connect-src 'self'; font-src 'self'; frame-src 'self'; img-src 'self'; media-src 'self'; object-src 'self'; script-src 'self'; style-src 'self'; report-uri http://{{host}}/endpoint/{{project.hash}} </pre>
      </div>
    </div>
  </div>

  <div ng-show="reports">
    <div class="row">
      <div class="col-md-3">
        <img src="/img/happy.png" width="100%"> </img>
      </div>
      <div class="col-md-9"> 
        <p> Last Seen Policy </p>
        <pre>{{project.policy}}</pre>
      </div>
    </div>
  </div>
</div>

<div class="stats row">
  <div class="col-md-3">
    <div class="well"> 
      <strong> Reports Today: </strong> 
      <div class="statNumber"> {{reportsToday}} </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="well"> 
      <strong> Total Reports: </strong> 
      <div class="statNumber"> {{totalReports}} </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="well"> 
      <strong> Unique Reports Today: </strong> 
      <div class="statNumber"> {{uniqueReportsToday}} </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="well"> 
      <strong> Total Unique Reports: </strong> 
      <div class="statNumber"> {{totalUniqueReports}} </div>
    </div>
  </div>
</div>

<div ng-show="reports.length==0">
  <p> Welcome! Add the following to header to your website! </p>
  <pre>Content-Security-Policy: default-src 'self'; report-uri http://caspr.io/endpoint/{{project.hash}}</pre>
</div>

<div id="chartHolder">
  <div id="chart_container">
          <div id="y_axis"></div>
          <div id="tschart"></div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <!-- <div id="graphControl">
        <div class="form-group">
          <label> Number of Series </label>
          <input type="number" ng-model="seriesCount" class="form-control"> </input>
        </div>
      </div> -->
    </div>

    <div class="col-md-8">
      <div id="legend"></div>
    </div> 
  </div>

</div>


<input type="text" class="form-control" ng-model="search" placeholder="Search..."> </input>

<table class="table table-hover">
  <tr>
    <th> Count </th>
    <th> Last Timestamp </th>
    <th> Directive </th>
    <th> Document URI </th>
    <th> Blocked URI </th>
  </tr>

  <tr ng-repeat="group in groups | filter : search">
    <td> {{group.count}} </td>
    <td> {{group.latest | date: 'short'}} </td>
    <td> {{group.directive}} </td>
    <td> {{group.csp_report.blocked_uri}} </td>
    <td> {{group.csp_report.document_uri}} </td>
  </tr>

</table>

