<h1 ng-bind="project.name"> Project Title </h1>
<hr>

<div class="policy">
  <div ng-hide="reports">
    <div class="row">
      <div class="col-md-3">
        <img src="/img/happy.png" width="100%"> </img>
      </div>
      <div class="col-md-9"> 
        <p> Please add the following header to your website: </p>
        <pre>Content-Security-Header: default-src 'none'; script-src 'self'; connect-src 'self'; img-src 'self'; style-src 'self'; font-src 'self'; report-uri http://{{host}}/endpoint/{{project.hash}} </pre>
      </div>
    </div>
  </div>

  <div ng-show="reports">
    <div class="row">
      <div class="col-md-3">
        <img src="/img/happy.png" width="100%"> </img>
      </div>
      <div class="col-md-9"> 
        <p> Last Seen Policy </p>
        <pre>{{project.policy}}</pre>
      </div>
    </div>
  </div>
</div>


<div class="stats row">
  <div class="col-md-3">
    <div class="well"> 
      <strong> Reports Today: </strong> 
      <div class="statNumber"> {{reportsToday}} </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="well"> 
      <strong> Total Reports: </strong> 
      <div class="statNumber"> {{totalReports}} </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="well"> 
      <strong> Unique Reports Today: </strong> 
      <div class="statNumber"> {{uniqueReportsToday}} </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="well"> 
      <strong> Total Unique Reports: </strong> 
      <div class="statNumber"> {{totalUniqueReports}} </div>
    </div>
  </div>
</div>


<div ng-hide="reportsToday" class="alert alert-danger" role="alert"> <strong> Heads up! </strong> No reports have been recieved for today! </div>

<div id="chartHolder">
  <div id="chart_container">
    <div id="y_axis"></div>
    <div id="tschart"></div>
  </div>

  <div class="row">

    <div class="col-md-4">
    </div>

    <div class="col-md-4">
      <div id="seriesCount"  style="padding: 20px">
        <label> Number of Series: </label>
        <div class="input-group">
          <span class="input-group-addon" ng-click="seriesCount = seriesCount - 1">-</span>
          <input type="text" class="form-control" ng-model="seriesCount">
          <span class="input-group-addon" ng-click="seriesCount = seriesCount + 1">+</span>
        </div>
      </div>

    </div>

    <div class="col-md-4">
      <div style="width: 95%" id="legend"></div>
    </div> 
  </div>
</div>

<br>

<input type="text" class="form-control" ng-model="search" placeholder="Search..."> </input>

<div class="directiveFilter" style="padding: 10px">
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox1" ng-model="directive.default"> default-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox2" ng-model="directive.script"> script-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox3" ng-model="directive.style"> style-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox1" ng-model="directive.img"> img-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox2" ng-model="directive.font"> font-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox3" ng-model="directive.connect"> connect-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox3" ng-model="directive.media"> media-src
  </label>
  <label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox3" ng-model="directive.object"> object-src
  </label>

  <button class="button-inline btn btn-primary" ng-click="allOn()"> All On </button>
  <button class="button-inline btn btn-danger" ng-click="allOff()"> All Off </button>
</div>

<div style="height: 500px">
<table class="table">
  <tr>
    <th ng-class="{ 'bg-primary': (predicate == 'count') }" ng-click="tableSort('count')"> Count </th>
    <th ng-class="{ 'bg-primary': (predicate == 'latest') }" ng-click="tableSort('latest')"> Last Timestamp </th>
    <th ng-class="{ 'bg-primary': (predicate == 'directive') }" ng-click="tableSort('directive')"> Directive </th>
    <th ng-class="{ 'bg-primary': (predicate == 'csp_report.blocked_uri') }" ng-click="tableSort('csp_report.blocked_uri')"> Blocked URI </th>
    <th ng-class="{ 'bg-primary': (predicate == 'csp_report.document_uri') }" ng-click="tableSort('csp_report.document_uri')"> Document URI </th>
  </tr>

  <tr ng-repeat="group in groups | filter : search | directiveType : directive | orderBy:predicate:tableReversed">
    <td> {{group.count}} </td>
    <td> {{group.latest | date: 'short'}} </td>
    <td> {{group.directive}} </td>
    <td> <a href="{{group.csp_report.blocked_uri}}"> {{urlDisplay(group.csp_report.blocked_uri)}} </a> </td>
    <td> <a href="{{group.csp_report.document_uri}}"> {{urlDisplay(group.csp_report.document_uri)}} </a> </td>
  </tr>
</table>
</div>

<!-- <div ng-show="(groups | filter : search | directiveType : directive | orderBy:predicate:tableReversed).length == 0" style="height: 400px">  </div>
 -->
